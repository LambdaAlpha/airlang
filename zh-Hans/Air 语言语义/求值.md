# 求值

## 正向调用

`f ; i`：以 `i` 为输入调用 `f`

- 对 `f` 求值，得到 `f1`
- 若 `f1` 是一个函数
  - 根据 `f1` 的正向设置对 `i` 求值，得到 `i1`
  - 以当前上下文和输入 `i1` 调用函数 `f1`，并返回其返回值
- 若 `f1` 是一个符号，其在上下文中绑定的函数为 `f2`
  - 将上下文中 `f1` 绑定设为不可访问
  - 根据 `f2` 的正向设置对 `i` 求值，得到 `i1`
  - 以当前上下文和输入 `i1` 调用函数 `f2`，得到 `o`
  - 将上下文中 `f1` 绑定设为可访问
  - 返回 `o`
- 否则对 `i` 求值，得到 `i1`，返回 `f1 ; i1`

## 逆向调用

`f ! o`：求解如何使 `f` 输出 `o`，并使上下文变成当前上下文的逆向

- 对 `f` 求值，得到 `f1`
- 若 `f1` 是一个函数
  - 根据 `f1` 的逆向设置对 `o` 求值，得到 `o1`
  - 若上下文存在求解器，以当前上下文和输入 `f1 ! o1` 调用求解器 `s`，并返回其返回值
- 若 `f1` 是一个符号，其在上下文中绑定的函数为 `f2`
  - 将上下文中 `f1` 绑定设为不可访问
  - 根据 `f2` 的逆向设置对 `o` 求值，得到 `o1`
  - 将上下文中 `f1` 绑定设为可访问
  - 若上下文存在求解器，以当前上下文和输入 `f1 ! o1` 调用求解器 `s`，并返回其返回值
- 否则对 `o` 求值，得到 `o1`，返回 `f1 ! o1`
