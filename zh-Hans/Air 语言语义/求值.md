# 求值

求值规则基于输入的类型

## 符号

符号 `s`：读取（复制）当前上下文中以 `s` 为键的值，若没有，则返回 `'u`

## 调用

调用 `f i`：先对 `f` 求值，得到 `f1`

- 若 `f1` 是一个函数，则根据 `f1` 的输入模式对 `i` 求值，得到 `i1`，然后以当前上下文和输入 `i1` 调用函数 `f1`，并返回其返回值
- 否则对 `i` 求值，得到 `i1`，返回 `f1 i1`

## 逆向

逆向 `f ? o`：先对 `f` 求值，得到 `f1`

- 若 `f1` 是一个函数，则根据 `f1` 的输出模式对 `o` 求值，得到 `o1`
  - 若 `f1` 是上下文无关函数，且当前上下文有元上下文，且元上下文中 `solver` 绑定一个函数 `s`，则以当前上下文和输入 `f1 ? o1` 调用 `s`，得到 `a`
    - 若 `a` 是答案
      - 若 `a` 是 `answer.verified(p)`，
        - 若 `p` 的函数和 `f1` 相等，且 `p` 的输出和 `o1` 相等，且 `p` 为已证明的，则返回 `a`
        - 否则返回 `'u`
      - 否则返回 `a`
    - 否则返回 `'u`
  - 否则返回 `'u`
- 否则对 `o` 求值，得到 `o1`，返回 `f1 ? o1`

## 复合值

递归调用，具体如下

- 配对 `a : b`：分别对 `a`，`b` 求值，得到 `a1`，`b1`，返回 `a1 : b1`
- 列表：对列表中的每个元素求值，返回对应列表
- 映射：对映射中的每个键值对求值，返回对应映射

## 其他值

保持不变
