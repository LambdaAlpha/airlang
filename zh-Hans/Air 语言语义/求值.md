# 求值

## 符号

- `.a` 表示字面量 `a`
- `@a` 表示读取上下文中 `a` 的值
- `$a` 表示读取上下文中 `a` 的值并对其求值
- `a` 表示读取上下文中 `a` 的值

读取上下文中 `a` 的值的方式，见下方上下文部分。

## 上下文

### 配对

- `first`：表示配对的第一个元素
- `second`：表示配对的第二个元素

可读写

### 任务

- `function`：表示任务的函数
- `context`：表示任务的上下文
- `input`：表示任务的输入

可读写

### 列表

- 符号：转为整数 `i`，表示列表第 `i` 个元素
- 整数：表示列表第 `i` 个元素

可读写

### 映射

值 `k` 表示映射中 `k` 所映射的值

可读写，可新增，可移除

### 上下文

符号 `s` 表示上下文中 `s` 所绑定的值

遵从上下文中 `s` 的约束

## 任务

设任务的函数为 `f`，上下文为 `ctx`，输入为 `i`

### 调用

- 对 `f` 求值，得到 `f1`
- 若 `f1` 是一个函数
  - 根据 `f1` 的调用设置对 `i` 求值，得到 `i1`
  - 若 `ctx` 为单元，则使用当前上下文
  - 切换上下文为当前上下文中 `ctx` 所绑定的值
  - 以当前上下文和输入 `i1` 调用函数 `f1`，并返回其返回值
- 否则返回单元

### 求解

- 对 `f` 求值，得到 `f1`
- 若 `f1` 是一个函数
  - 根据 `f1` 的求解设置对 `i` 求值，得到 `i1`
  - 若 `ctx` 为单元，则使用当前上下文
  - 切换上下文为当前上下文中 `ctx` 所绑定的值
  - 若注册了 `f1` 的逆函数 `g`，则以当前上下文和 `i1` 调用 `g`，并返回其返回值
  - 否则若存在求解器，以当前上下文和输入 `f1 : i1` 调用求解器 `s`，并返回其返回值
- 否则返回单元
