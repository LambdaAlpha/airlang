# 控制

## do

类型：function

上下文访问：可变

调用模式：`id`

可缓存性：否

- 若 i 是列表，则按顺序执行列表 i 中的元素 `si`，输出最后一个元素求值的结果。
  - 若 `si` 是一个调用 `f ; i` 且 `f` 为以下符号之一，且 `i` 为配对 `condition : value`，则对 `condition` 求值，得到 `c`，若以下条件满足，则不再继续对列表中之后的元素求值，对 `value` 求值得到 `v`，输出 `v`
    - `break_if`，`continue_if`：`c` 为真
    - `break_if_not`，`continue_if_not`：`c` 为假
    - `break_if_.`，`continue_if_.`：`c` 为单元
    - `break_if_not_.`，`continue_if_not_.`：`c` 不为单元
  - 否则对 `si` 求值
- 否则输出对输入求值的结果

## if

类型：function

上下文访问：可变

调用模式：`{pair : eval : id}`

可缓存性：否

若 i 为 `condition : branch1 : branch2`

- 若 `condition` 为真，则执行 `branch1`，并输出其结果，执行方式参照 `do`
- 若 `condition` 为假，则执行 `branch2`，并输出其结果，执行方式参照 `do`

## if_not

类型：function

上下文访问：可变

调用模式：`{pair : eval : id}`

可缓存性：否

若 i 为 `condition : branch1 : branch2`

- 若 `condition` 为假，则执行 `branch1`，并输出其结果，执行方式参照 `do`
- 若 `condition` 为真，则执行 `branch2`，并输出其结果，执行方式参照 `do`

## match

类型：function

上下文访问：可变

调用模式：`{pair : eval : {pair : {map : {} : form : id} : id}}`

可缓存性：否

若 i 为 `value : map : default`

- 若 `map` 某个键和 `value` 相等，则执行其绑定的值，输出其结果，执行方式参照 `do`
- 否则执行 `default`，输出其结果，执行方式参照 `do`

## do_match

类型：function

上下文访问：可变

调用模式：`{pair : eval : id}`

可缓存性：否

若 i 为 `value : list : default`，`list` 中每个值都是一个配对 `k : v`

- 按顺序对列表的每一项的 `k` 求值，得到 `k1`，若 `k1` 等于 `value`，则执行 `v`，输出其结果，执行方式参照 `do`
- 否则执行 `default`，输出其结果，执行方式参照 `do`

## while

类型：function

上下文访问：可变

调用模式：`id`

可缓存性：否

若 i 为 `condition : body`

1. 若 `condition` 不为真，则输出单元
2. 否则，执行 `body`，执行方式参照 `do`
   - 若执行结果为 `break` 返回 `o`，则输出 `o`
   - 否则转到 1

## while_not

类型：function

上下文访问：可变

调用模式：`id`

可缓存性：否

若 i 为 `condition : body`

1. 若 `condition` 不为假，则输出单元
2. 否则，执行 `body`，执行方式参照 `do`
   - 若执行结果为 `break` 返回 `o`，则输出 `o`
   - 否则转到 1

## for

类型：function

上下文访问：可变

调用模式：`{pair : eval : {pair : form : id}}`

可缓存性：否

若 i 为 `value : name : body`，若 `value` 为以下类型，则迭代 `value`，将对应值绑定到 `name`，然后执行 `body`

- integer：若 `i` 大于等于 `0`，从 0（含）迭代到 `i`（不含）
- byte：迭代其每一个字节
- symbol：迭代其每一个符号
- text：迭代其每一个字符
- list：迭代其每一个项
- map：迭代其每一个键值对
