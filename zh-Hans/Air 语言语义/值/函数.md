# 函数

函数类型表示一个函数。

## 静态函数和细胞函数

静态函数在被调用时会复制一份内上下文作为运行上下文，因此无法存续状态。

细胞函数在被调用时直接使用内上下文作为运行上下文，因此可以存续状态。

## 调用/求解设置

在求值中调用/求解函数时会先调用函数的对应设置函数预处理输入。

## 上下文访问

函数分为上下文无关函数，上下文不变函数和上下文可变函数。

### 无关

上下文无关函数不需要/不能访问上下文。

### 不变

上下文不变函数需要/能读取上下文，但不需要/不能改变上下文。

### 可变

上下文可变函数既需要/能读取上下文，也需要/能改变上下文。

## 实现方式

### 基础函数

基础函数内置于初始上下文中。

每个基础函数有一个唯一的标识符，其与初始上下文中此基础函数的键相同。

### 组合函数

组合函数是由其他函数组合而成的函数。组合函数由以下元素组成

- 代码
  - 上下文名（上下文相关函数）
  - 输入名
  - 函数体
- 内上下文

组合函数被调用时的行为如下

- 若函数是静态函数，其内上下文被复制一份作为运行上下文，若函数是细胞函数，使用其内上下文作为运行上下文
- 函数调用的输入以输入名为键存储至运行上下文中，变量访问类型为可赋值
- 当函数为上下文可变/不变函数时，函数调用的上下文以上下文名为键存储至运行上下文中，其变量访问类型为可变/不变，且为静态绑定
- 以运行上下文为上下文，以函数体为输入，调用求值函数，并返回其返回值
